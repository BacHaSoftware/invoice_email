<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <data>

        <record id="account_move_send_form" model="ir.ui.view">
            <field name="name">bhs.account.move.send.form</field>
            <field name="model">account.move.send</field>
            <field name="inherit_id" ref="account.account_move_send_form"/>
            <field name="arch" type="xml">
                <xpath expr="//div[@name='option_send_mail']" position="after">
                    <div name="option_send_all" invisible="checkbox_send_mail == False">
                        <field name="send_all"/>
                        <b><label for="send_all"/></b>
                    </div>
                </xpath>
                <xpath expr="//group/label[@for='mail_partner_ids']" position="attributes">
                    <attribute name="invisible">send_all == True or mode == 'invoice_multi'</attribute>
                </xpath>
                <xpath expr="//group[@invisible='not display_mail_composer']/div" position="attributes">
<!--                    <attribute name="attrs">{'invisible': ['|', ('send_all', '=', True), ('composition_mode', '=', 'mass_mail')]}</attribute>-->
                    <attribute name="invisible">send_all == True or mode == 'invoice_multi'</attribute>
                </xpath>
                <xpath expr="//field[@name='mail_subject']" position="before">
                    <field name="email_to_partner" required="send_all == True" invisible="send_all == False"/>
                    <field name="cc_partners" widget="many2many_tags_email" invisible="send_all == False"/>
                </xpath>
            </field>
        </record>

    </data>

</odoo>
